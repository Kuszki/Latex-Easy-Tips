\chapter{System składu \LaTeX}

Dawno, dawno temu, dokumenty sporządzane były na glinianych tabliczkach. Nieco później opracowano metodę druku, maszyny do pisania, a następnie komputery. Nawiązując do stanu obecnej technologii, sporządzanie technicznych manuskryptów w klasycznym edytorze tekstu typu \texttt{MS Word} może być porównywane do używania maszyny do pisania lub sporządzania schematów instalacji elektrycznej w programie \texttt{Paint}. Ideą tego porównania nie jest próba przekonania czytelnika, jakoby wskazany program był bezużyteczny, a jedynie podkreślenie, że nie jest to jego odpowiednie zastosowanie. Naturalnie, jeśli operator wskazanego programu wykaże się odpowiednią determinacją, uda mu się sporządzić odpowiedni dokument. Podobnie w przypadku sporządzenia schematu rozdzielni wysokiego napięcia w programie \texttt{Paint}, gdzie \enquote{dla chcącego nic trudnego}. Można to jednak zrobić prościej, lepiej, szybciej i skuteczniej.

Główną ideą systemu składu \LaTeX{} jest rozbicie procesu tworzenia dokumentu na dwie części: sporządzanie jego treści oraz ustalanie składu. Należy w tym miejscu podkreślić, że w typowym przypadku autor manuskryptu powinien być odpowiedzialny tylko i wyłącznie za proces tworzenia treści, a nie ustalanie w jaki sposób dokument powinien być sformatowany. Oznacza to zatem, że wszystkie kwestie związane z formatowaniem i składem powinny być ustalane przez osobę, która publikuje taki manuskrypt.

Obecnie niemal wszyscy wydawcy pism technicznych, znajdujący się na liście \enquote{JCR}, przekazują do dyspozycji autorów szablon artykułu w formacie \LaTeX\footnote{Dane na maj 2025, gdzie około 15 czasopism nie udostępnia takiego szablonu. Liczba oszacowana wykorzystując sztuczną inteligencję i analizę danych dostępnych na stronach internetowych czasopism.}. Oznacza to, że autor pobiera taki szablon i natychmiast zaczyna pracę z wprowadzaniem treści dokumentu, który \enquote{formatuje się sam}. Naturalnie, podobna sytuacja ma miejsce w przypadku szablonu dla klasycznego edytora tekstu. Należy jednak zwrócić uwagę, że bardzo często taki dokument nie posiada poprawnie zdefiniowanych stylów, a jedynie wytyczne odnośnie formatowania i wstępnie sformatowany tekst.

Każdy najprawdopodobniej słyszał kiedyś hasło \enquote{początki bywają trudne}. Człowiek jest zwykle negatywnie nastawiony do zmian, nowe sytuacje budzą w nim niepokój, w reakcji na który często występuje pewnego rodzaju reakcja obronna. Najczęstsze argumenty, które usłyszeć można od zagorzałych sympatyków klasycznych edytorów tekstu, skupiają się wokół: \enquote{po co mi to}, \enquote{używam \texttt{xxx} tyle czasu i jest mi dobrze}, \enquote{ja to lubię mieć kontrolę nad dokumentem}, \enquote{ale to pewnie tylko na tego Linuxa}. Niestety taka mentalność bardzo skutecznie hamuje rozwój i blokuje człowieka przed podjęciem próby stosowania innych rozwiązań. Stosując język potoczny, można to porównać do dyskusji w stylu \enquote{ja nie chcę auta w automacie, bo nie będę mieć wtedy kontroli} lub \enquote{a po co mi toaleta w domu, kiedy mam sławojkę na polu i mi z tym dobrze -- przecież mi będzie w domu pachnieć brzydko}. Oczywiście przykłady te mogą być nieco przekoloryzowane.

\section{Pierwsze starcie z \LaTeX}

Pierwsze starcie z systemem składu \LaTeX{} rzeczywiście może być pewnym wyzwaniem dla przeciętnego użytkownika komputera. Środowisko \texttt{TeX Live} nie posiada bowiem żadnego graficznego interfejsu, wymaga instalacji i konfiguracji. O ile w przypadku stosowania systemu operacyjnego z rodziny \texttt{GNU/Linux}\footnote{Zwykle sprowadza się do instalacji pakietu \texttt{texlive} z repozytorium.} lub \texttt{macOS}\footnote{Standardowo polega na instalacji pakietu \texttt{MacTeX} programem \texttt{brew}.} jest to proces bardzo prosty, o tyle w przypadku użytkowników systemu \texttt{MS Windows} proces ten jest trudniejszy\footnote{Przykładem jest port pakietu \texttt{TeX Live} dostępny w serwisie \href{https://tug.org/texlive/windows.html}{tug.org}.}. Brak interfejsu graficznego i pozornie skomplikowany proces instalacji to pierwsza przeszkoda, skutecznie zniechęcająca nowych użytkowników.

Drugim istotnym problemem jest fakt, że wszystkie dokumenty \LaTeX{} to zwykłe pliki tekstowe. Oznacza to, że edytując je użytkownik \enquote{nie widzi co robi}. Po wprowadzeniu treści należy skompilować projekt w celu uzyskania dokumentu w formacie \texttt{PDF}. Oznacza to, że w przypadku wystąpienia błędów w składni stosowanych poleceń, dokument może nie skompilować się wcale. Co więcej, ewentualny błąd, mimo że będzie wskazany wraz z podaniem miejsca wystąpienia, wcale nie musi być jasny dla nowego użytkownika, a jego poprawa może okazać się czasochłonna i frustrująca.

Kolejną istotną przeszkodę stanowi fakt, że utworzenie przykładowego projektu i jego kompilacja mogą być bardzo trudne dla początkującego użytkownika. Niedostępne jest bowiem żadne narzędzie podobne do \enquote{utwórz nowy dokument} oraz \enquote{konwertuj do \texttt{PDF}}. Poza właściwą treścią dokumentu, plik źródłowy musi zawierać między innymi niezbędne informacje o jego klasie i użytym stylu. Normalnie użytkownik nie wprowadza ich stosując szablon udostępniany przez czasopismo, natomiast podczas pierwszych przygód z omawianym systemem prawdopodobnie będzie on chciał najpierw wypróbować go na najprostszym przykładzie.

Po przygotowaniu podstawowej struktury i wprowadzeniu treści dokumentu przychodzi czas na jego kompilację. Tutaj znowu napotkać można problem zatytułowany \enquote{nie ma gotowego przycisku w tym celu}. Proces kompilacji dokumentu złożony jest z wielu etapów, które należy uruchamiać w odpowiedniej kolejności i odpowiednią ilość razy. Z pomocą przychodzi gotowy skrypt \texttt{latexmk} dostarczany standardowo z pakietem \texttt{TeX Live}, natomiast jest to narzędzie uruchamiane jedynie z poziomu wiersza poleceń, gdzie dodatkowo należy przekazać do niego odpowiednie parametry.

Powyższe informacje najprawdopodobniej zdążyły już utwierdzić czytelnika w niechęci do stosowania \LaTeX{}. Trudna obsługa, same problemy, skomplikowana instalacja -- \enquote{komu to potrzebne, skoro mam działające rozwiązanie}. Warto w tym miejscu wrócić do tematu \enquote{toalety w domu}, gdzie w celu jej instalacji również należy przeprowadzić szereg czynności, wiążących się z bałaganem i wysiłkiem. Być może warto jednak przemyśleć ewentualne korzyści z tego wysiłku.

\section{Projekt \texttt{Overleaf}}

Aby uniknąć nieprzyjemnych przygód i trudności opisanych w poprzedniej sekcji, przygodę z \LaTeX{} zacząć można od zapoznania się z projektem \href{https://github.com/overleaf/overleaf}{\texttt{Overleaf}}. Projekt ten rozwijany jest przez społeczność i udostępniany w ramach licencji \href{https://www.gnu.org/licenses/agpl-3.0.html}{AGPL-3.0}. Twórcy projektu udostępniają wersję \href{https://www.overleaf.com}{online}, z której korzystać można zarówno w ramach bezpłatnej licencji, jak i subskrypcji indywidualnej oraz grupowej. W ramach projektu dostępna jest również możliwość uruchomienia identycznej usługi na własnym komputerze, w dowolnym zastosowaniu, legalnie i całkowicie za darmo. W tym celu wykorzystać można przygotowany przez twórców \href{https://github.com/overleaf/toolkit}{toolkit}.

Po uruchomieniu aplikacji utworzyć można nowy, pusty projekt. Projekt ten składa się z pojedynczego pliku \texttt{main.tex}, którego treść przedstawia listing~\ref{lst:overleaf_sample}. Na początku pliku określana jest klasa dokumentu, na podstawie której ładowane są domyślne opcje formatowania. Następnie ładowane są stosowane biblioteki i określana jest metryka dokumentu. Faktyczna treść dokumentu zawarta jest w środowisku \texttt{document}, to znaczy miedzy liniami \mintinline{latex}{\begin{document}} oraz \mintinline{latex}{\end{document}}. Po lewej stronie okna programu znaleźć można eksplorator plików, natomiast główna część okna składa się z edytora tekstu oraz okna podglądu dokumentu. Po wprowadzeniu zmian należy użyć opcji \enquote{kompiluj}, po czym odświeżony zostanie podgląd dokumentu.

\begin{listing}[htb]
\inputminted{latex}{skrypty/overleaf_sample.tex}
\makecaption{lst:overleaf_sample}{Treść przykładowego dokumentu \LaTeX}
\end{listing}

Należy zwrócić uwagę, że w omawianym systemie składu liczba spacji oraz znaków nowej linii nie ma znaczenia. Nowy akapit rozpoczynany jest jeżeli pomiędzy kolejnymi liniami tekstu wystąpią co najmniej dwa znaki nowej linii. Treść pliku znajdująca się po znaku procenta traktowana jest jako komentarz i nie jest brana pod uwagę podczas kompilacji dokumentu. W przypadku, gdy w składni dokumentu pojawi się błąd, zamiast podglądu dokumentu wyświetlany jest raport o błędzie, a dodatkowo w edytorze zaznaczana jest linia, w której ten błąd wystąpił. Portal \texttt{Overleaf} oferuje pomoc asystenta \texttt{AI} w naprawie błędu.

Na stronie internetowej portalu znaleźć można bardzo bogatą \href{https://www.overleaf.com/learn}{dokumentację} oraz różnorodne \href{https://www.overleaf.com/learn/latex/Learn_LaTeX_in_30_minutes}{materiały szkoleniowe}. Najważniejsze z nich cytowane są w dalszych częściach niniejszej pracy. Można zatem w tym miejscu zakończyć jej lekturę i poświęcić czas na analizę profesjonalnych, znacznie lepiej zorganizowanych materiałów. Motywację do dalszej lektury pracy stanowi jednak fakt, że omawiane materiały są bardzo ogólne i obszerne, a niniejsza praca skupia się na zastosowaniu proponowanych narzędzi podczas typowej działalności naukowej.

\section{Samodzielna kompilacja dokumentu}

Przedstawiony w listingu~\ref{lst:overleaf_sample} projekt może być też skompilowany samodzielnie, stosując narzędzie \texttt{latexmk}. W tym celu należy otworzyć linię poleceń, przejść do katalogu w którym znajduje się plik \texttt{main.tex}, a następnie wprowadzić polecenie \mintinline{bash}{latexmk -pdf -f main.tex}, gdzie pierwszy parametr oznacza wybór kompilatora \texttt{pdfTeX}, opcja \texttt{-f} wymusza kontynuację kompilacji nawet w przypadku napotkania błędów, natomiast ostatni parametr wskazuje plik źródłowy projektu. Poprawne wykonanie polecenia zaowocuje pojawieniem się pliku \texttt{main.pdf} w katalogu projektu.

Należy podkreślić, że portal \texttt{Overleaf} to gotowe narzędzie, które wykorzystuje środowisko \texttt{TeX Live}. Oznacza to, że nie jest istotne w jaki sposób użytkownik korzysta z systemu składu \LaTeX{}, ponieważ faktycznie wykorzystuje on cały czas ten sam projekt \texttt{TeX Live}. Sporządzony dokument za każdym razem wyglądać będzie identycznie, niezależnie od stosowanego interfejsu czy systemu operacyjnego. Jest to ogromna przewaga w stosunku do typowych edytorów tekstu.

\section{Stosowanie szablonu dokumentu}

Niniejsza praca nie jest kursem systemu składu \LaTeX{}, stąd nie zawarto w niej szczegółowych instrukcji w jaki sposób dostosować dokument do potrzeb użytkownika. Praca skupia się na wprowadzeniu użytkownika do pracy z omawianym systemem, zakładając że ten stosować będzie gotowy szablon dla edytowanego dokumentu. Przykładem takiego szablonu może być rozwiązanie stosowane przez \texttt{MDPI}. Wydawnictwo to udostępnia jednolity \href{https://www.mdpi.com/authors/latex}{szablon} dla wszystkich czasopism.

Po pobraniu szablonu należy wypakować go do wybranego folderu lub bezpośrednio utworzyć nowy projekt w serwisie \texttt{Overleaf}, importując pobrane archiwum. Szablon zawiera odpowiednie komentarze, jakie pola użytkownik powinien uzupełnić oraz które części dokumentu nie powinny być przez niego edytowane. Szablon zawiera również przykłady zamieszczania rysunków, tabel, bibliografii i przypisów. Można zatem zauważyć, że komponując docelowy dokument istnieje możliwość stosowania metody \enquote{kopiuj-wklej} dla kolejnych fragmentów szablonu oraz edycji ich treści, przez co nie ma potrzeby uczenia się na pamięć stosowanych rozwiązań.

Należy podkreślić, że użytkownik nie powinien ręcznie zmieniać ustawień odnośnie formatowania dokumentu, w tym przykładowo kroju czcionki oraz jej rozmiaru. Takie efekty są osiągane automatycznie, podczas wstawiania odpowiednich fragmentów dokumentu. W przypadku, gdy sytuacja wymaga zaakcentowania fragmentu tekstu poprzez pogrubienie go czy podkreślenie, stosować można podstawowe polecenia opisane są w \href{https://www.overleaf.com/learn/latex/Font_sizes%2C_families%2C_and_styles}{instrukcji} stanowiącej część projektu \texttt{Overleaf}.

\section{Edycja równań}

Wstawianie równań opisane jest w podstawowej formie w \href{https://www.overleaf.com/learn/latex/Mathematical_expressions}{instrukcji} stanowiącej część dokumentacji projektu \texttt{Overleaf}. Najczęściej stosowanym rozwiązaniem jest użycie środowiska \texttt{equation}. W ten sposób wprowadzone równania są automatycznie numerowane oraz umieszczane zgodnie z ustawieniami szablonu. Przykładowe równanie:
\begin{equation}
f_{1}(x) = \int _{0} ^{\infty} (a \cdot x + b) \mathrm{d}x \label{eq:equation_sample_1},
\end{equation}
wstawione zostało stosując kod źródłowy przedstawiony w listingu~\ref{lst:equation_sample_1}. Równanie to przywoływać można w tekście stosując polecenie \mintinline{latex}{\eqref{nazwa_równania}}, przy czym wymieniona nazwa równania została zdefiniowana w środowisku \texttt{equation}, stosując zapis \mintinline{latex}{\label{nazwa_równania}} tworzący odnośnik. Należy zauważyć, że równanie jest numerowane i formatowane automatycznie, a odstępy nie mają znaczenia.

\begin{listing}[htb]
\begin{minted}{latex}
\begin{equation}
f_{1}(x) = \int _{0} ^{\infty} (a \cdot x + b) \mathrm{d} x \label{nazwa_równania},
\end{equation}
\end{minted}
\makecaption{lst:equation_sample_1}{Kod źródłowy generujący równanie~\eqref{eq:equation_sample_1}}
\end{listing}

W przypadku, gdy dodawanych jest kilka równań jedno pod drugim nie należy stosować wielokrotnie środowiska \texttt{equation}. Zamiast tego stosować można środowiska \texttt{gather} lub \texttt{align}. Zastosowanie środowiska \texttt{gather} pozwala uzyskać efekt:
\begin{gather}
f_{2}(x) = 123 x + 321 \label{eq:equation_sample_2}, \\
f_{3}(x) = 8 x + 7 \label{eq:equation_sample_3},
\end{gather}
natomiast stosowanie środowiska \texttt{align} umożliwia wyrównanie wszystkich równań do wspólnego punktu odniesienia, co pozwala na uzyskanie efektu:
\begin{align}
f_{4}(x) &= 896 x - 777 \label{eq:equation_sample_4}, \\
f_{5}(x) &= 2 x + 3 \label{eq:equation_sample_5}.
\end{align}
Stosować również można inne rozwiązania z biblioteki \texttt{amsmath}, zgodnie z potrzebą i przeznaczeniem, w tym przykładowo środowisko \texttt{cases}:
\begin{equation}
f_{6}(x) =
\begin{cases}
0, & \text{jeżeli $x \ge \pi$}  \\
1, & \text{w przeciwnym razie}
\end{cases}
\label{eq:equation_sample_6}.
\end{equation}
Kody źródłowe dla wskazanych przykładów, umożliwiające wprowadzenie równań od~\eqref{eq:equation_sample_2} do~\eqref{eq:equation_sample_6}, przedstawiono zbiorczo w listingu~\ref{lst:equation_sample_2_6}.

\begin{listing}[htb]
\inputminted{latex}{skrypty/equations_sample.tex}
\makecaption{lst:equation_sample_2_6}{Kod źródłowy generujący równania od~\eqref{eq:equation_sample_2} do~\eqref{eq:equation_sample_6}}
\end{listing}

Można zauważyć, że równania wstawione w przedstawiony sposób stają się częścią zdania. Przecinek lub kropkę po równaniu wstawia się wewnątrz definicji tego równania. Jeśli po zakończeniu środowiska równania nie zostanie wstawione więcej niż jedno przejście do nowej linii, to akapit zawierający równanie będzie kontynuowany. Jeśli natomiast po równaniu pojawią się co najmniej dwa znaki nowej linii, rozpoczęty zostanie kolejny akapit. Wstawianie etykiet równań jest opcjonalne, natomiast bez nich nie ma możliwości odwołania się do równania. Równania bez etykiety również są numerowane.

Równania wstawiać można również bezpośrednio wewnątrz akapitu, podczas wprowadzania tekstu. Należy w tym celu umieścić treść równania pomiędzy znakami dolara. W ten sposób zapis \mintinline{latex}{$f(x) = ax + b$} zamieni się na $f(x) = ax + b$. Należy podkreślić, że podczas wprowadzania równań liczba spacji pomiędzy kolejnymi symbolami nie ma żadnego znaczenia.

Podczas pisania wzorów należy zwrócić uwagę na rozmiar nawiasów. Stosowanie zapisu \mintinline{latex}{(...)} nie zapewnia dynamicznej zmiany rozmiaru nawiasów, stąd równanie nie będzie wyglądało estetycznie w przypadku, gdy treść nawiasu jest wysoka. W takim przypadku należy stosować zapis \mintinline{latex}{\left( ... \right)}, który działa dla dowolnego rodzaju nawiasu. Przykład poprawnego formatowania przedstawia równanie:
\begin{equation}
\mathbb{E}_\delta \left[ \cos \emb{\omega \delta} \right] = \cos \emb{\omega \mu} \exp \emb{-\frac{1}{2} \omega^2 \sigma^2} \label{eq:equation_sample_7_good},
\end{equation}
natomiast bez stosowania opisanego rozwiązania uzyskuje się niepoprawny efekt:
\begin{equation}
\mathbb{E}_\delta [ \cos (\omega \delta) ] = \cos (\omega \mu) \exp (-\frac{1}{2} \omega^2 \sigma^2) \label{eq:equation_sample_7_bad},
\end{equation}
przy czym kod źródłowy równania~\eqref{eq:equation_sample_7_good}, pozwalający na uzyskanie poprawnego rezultatu, przedstawiono w listingu~\ref{lst:equation_sample_7}.

\begin{listing}[htb]
\begin{minted}{latex}
\begin{equation}
\mathbb{E}_\delta \left[ \cos \left( \omega \delta \right) \right] = \cos \left( \omega \mu \right) \exp \left( -\frac{1}{2} \omega^2 \sigma^2 \right) \label{eq:7}
\end{equation}
\end{minted}
\makecaption{lst:equation_sample_7}{Kod źródłowy generujący równanie~\eqref{eq:equation_sample_7_good}}
\end{listing}

Znaki specjalnie, takie jak litery greckie czy symbole matematyczne, wprowadzane są do równań stosując ich nazwę. Przykładowo \mintinline{latex}{\alpha} zamienia się na $\alpha$ oraz \mintinline{latex}{\varphi} zamienia się na $\varphi$. Symbole te należy stosować w trybie matematycznym, czyli wewnątrz omówionych wcześniej środowisk lub w tekście pomiędzy symbolami dolara. Stosowanie ich w trybie tekstowym skutkować będzie błędem kompilacji.

Indeksy górne osiąga się przez stosowanie znaków \mintinline{latex}{x _{a} ^{b}}, co zamienione zostanie na $x _{a} ^{b}$. Domyślnie wszystkie symbole traktowane są jako zmienne i pisane są kursywą. Jeżeli symbol stanowi macierz lub wektor, należy zastosować format \mintinline{latex}{\mathbfit{X}}, co zamienia się na $\mathbfit{X}$. Jeżeli natomiast symbol jest wartością stałą i powinien być zapisany czcionką prostą, stosuje się \mintinline{latex}{\mathrm{e}}, co zamienia się na $\mathrm{e}$.

\section{Formatowanie liczb i jednostek}

Jeżeli w tekście występują wielkości fizyczne wraz z ich wartościami i jednostkami, zaleca się stosowanie biblioteki \texttt{siunitx}. Biblioteka ta automatycznie formatuje wartości liczbowe i umożliwia wprowadzanie ich jednostek. Główną zaletą biblioteki jest obsługa formatowania zależnego od regionu, takiego jak na przykład automatyczna zmiana separatora dziesiętnego. Przykłady użycia biblioteki to:
\begin{itemize}
\item \mintinline{latex}{$U = \qty{12.3}{\micro V}$} zamieni się na $U = \qty{12.3}{\micro V}$,
\item \mintinline{latex}{$a = \qty{10}{m \per s^2}$} zamieni się na $a = \qty{10}{m \per s^2}$,
\item \mintinline{latex}{\qty{\pm 0.25}{\percent}} zamieni się na \qty{\pm 0.25}{\percent},
\item \mintinline{latex}{\qty{1.29 \pm 0.16}{\ohm}} zamieni się na \qty{1.29 \pm 0.16}{\ohm},
\item \mintinline{latex}{\num{100000}} zamieni się na \num{100000},
\item \mintinline{latex}{\num{1.124e-7}} zamieni się na \num{1.124e-7}.
\end{itemize}
Zapisy \mintinline{latex}{\num{...}} oraz \mintinline{latex}{\qty{...}{...}} mogą być stosowane zarówno w trybie matematycznym, jak i bezpośrednio w tekście. Pomiędzy wartością oraz jednostką automatycznie dodawana jest nierozdzielająca spacja. 

Należy zauważyć, że wprowadzając wartość liczbową wraz z ręcznym stosowaniem przecinka jako separatora dziesiętnego uzyskuje się nieprawidłowy wygląd równania. Przykładowo \mintinline{latex}{x = 12,3} zamienia się na $x = 12,3$, gdzie zauważyć można niepotrzebną spację przed częścią dziesiętną. Stosowanie zapisu \mintinline{latex}{x = \num{12.3}} zapewnia możliwość uzyskania $x = \num[locale = PL]{12.3}$ w przypadku dokumentu w języku polskim oraz $x = \num[locale = US]{12.3}$ dla dokumentu w języku angielskim. Można zatem bardzo łatwo skopiować fragment dokumentu lub przenieść go do innego szablonu, nawet o innym języku.

Wszystkie zasady formatowania liczb i jednostek ustala się na początku dokumentu w ustawieniach biblioteki \texttt{siunitx}. Oznacza to, że w przypadku potrzeby zmiany formatowania należy jedynie skorygować ustawienia, po czym wszystkie miejsca gdzie stosowano odpowiednie formatowanie zaktualizują się automatycznie. Bibliotekę można dołączyć do projektu stosując zapis \mintinline{latex}{\usepackage[locale = PL]{siunitx}}. Stosowanie dodatkowych bibliotek jest akceptowane przez czasopisma pod warunkiem, że te skonfigurowane są tak, aby uzyskać format wymagany przez wydawnictwo. Szczegóły konfiguracji omawianej biblioteki znajdują się w jej \href{https://ctan.org/pkg/siunitx}{dokumentacji}.

Omawiana biblioteka umożliwia również automatyczne formatowanie treści w tabelach oraz generowanych wewnątrz dokumentu wykresach. Te zastosowania omówiono w dalszej części pracy. Istnieje wiele dodatkowych bibliotek, które stosują bibliotekę \texttt{siunitx} do formatowania liczb.

\section{Wstawianie rysunków}

Rysunki wstawiane do dokumentu są wczytywane z osobnych plików. Najlepszym i najbardziej naturalnym formatem jest format \texttt{PDF}, przy czym możliwe jest wczytywanie rysunków o innych formatach. Standardowo, poza formatem \texttt{PDF}, wspierane są formaty: \texttt{EPS}, \texttt{PNG}, \texttt{JPEG} oraz \texttt{JBIG2}. Najlepszym rozwiązaniem jest sporządzanie rysunków w postaci wektorowej oraz eksport ich do formatu \texttt{PDF} lub \texttt{EPS}.

Przykład osadzenia rysunku w tekście przedstawiono w listingu~\ref{lst:images_sample}. Parametry \verb|[htb]| oznaczają kolejno: wstaw rysunek dokładnie w miejscu pojawienia się tego kodu (\texttt{h}) lub jeśli to niemożliwe wstaw go na górze strony (\texttt{t}) lub na samym dole (\texttt{b}). Kompilator automatycznie wyznaczy najlepszą pozycję dla rysunku tak, aby uniknąć pustych przestrzeni i zachować odpowiednią jakość składu. Wstawiając opcję zakończoną wykrzyknikiem wymusza się ją, niezależnie od sugestii kompilatora.

\begin{listing}[htb]
\inputminted{latex}{skrypty/images_sample.tex}
\makecaption{lst:images_sample}{Kod źródłowy umożliwiający osadzenie rysunku}
\end{listing}

Podpis rysunku wraz z numerem generują się automatycznie, przy czym formatowanie i styl podpisu wynikają z definicji zawartych w szablonie. Domyślnie podpis jest generowany w miejscu, gdzie wstawione zostało polecenie \mintinline{latex}{\caption{Treść}}, stąd istotne jest czy pojawi się ono przed \mintinline{latex}{\includegraphics{nazwa_pliku}}, czy po. Można jednak zmienić to zachowanie stosując bibliotekę \texttt{floatrow}, która umożliwia globalne określenie stylu i lokalizacji podpisów wszystkich obiektów, dzięki czemu niezależnie od kolejności użycia poleceń uzyskać można poprawną lokalizację podpisu. Standardowo rysunki wstawiane są pomiędzy treścią akapitu lub pomiędzy akapitami. Istnieje jednak możliwość wstawienia rysunku w ten sposób, by był on otoczony przez tekst. Stosować w tym celu należy bibliotekę \texttt{wrapfig}. Takie działanie nie jest zwykle zalecane w publikacjach naukowych z uwagi na mniejszą czytelność.

Do rysunków odnosić się można stosując ich nazwę, podaną podczas tworzenia etykiety, za pomocą zapisu \mintinline{latex}{\ref{nazwa_rysunku}}. Należy zaznaczyć, że dla wskazanego przykładu nazwa to \verb|fig:rys_1|. Dodatkowe informacje na temat rysunków znaleźć można w \href{https://www.overleaf.com/learn/latex/Inserting_Images}{dokumentacji} projektu \texttt{Overleaf}.

\section{Wstawianie tabel}

Sporządzanie tabel w \LaTeX{} nie jest przyjemne i wymaga odrobinę wprawy. Rozwiązanie to odwdzięcza się jednak jednolitym wyglądem oraz sporą możliwością automatyzacji formatowania danych. W przypadku tabel z wynikami pomiarów bardzo dobrym pomysłem jest stosowanie biblioteki \texttt{siunitx}. Biblioteka ta zapewnia czytelne wyrównanie wartości liczbowych, a także uniezależnia dane od formatu ich wyświetlania (istotne np. gdy skopiowane wyniki posiadają kropkę jako separator dziesiętny, a lokalny format wymaga przecinka). Przykład tabeli przedstawiono przy okazji tabeli~\ref{tab:tables_sample} przy czym do jej wygenerowania zastosowano kod przedstawiony w listingu~\ref{lst:tables_sample}.

\begin{table}[htb]
\caption{Przykładowa tabela stworzona w \LaTeX}
\label{tab:tables_sample}
\begin{tabular}[c]{ | c | r | l | S[table-format = +2.3] | } \hline
\textbf{Symbol} & \textbf{A} & \textbf{B} & \textbf{C}    \\ \hline
$S_{2,0}$       & tekst1     & tekst2     & -0.075        \\ \hline
$S_{2,1}$       & tekst abc  &            & 12.3          \\ \hline
$T_{2,0}$       & tekst 3    & tekst 4    & +1.99         \\ \hline
\end{tabular}
\end{table}

\begin{listing}[htb]
\inputminted{latex}{skrypty/tables_sample.tex}
\makecaption{lst:tables_sample}{Kod źródłowy umożliwiający wygenerowanie tabeli~\ref{tab:tables_sample}}
\end{listing}

Podobnie, jak w przypadku obrazków, tabele numerowane są automatycznie, a odnosić się do nich można stosując \mintinline{latex}{\ref{nazwa_tabeli}}. W przypadku potrzeby umieszczania długich tabel (takich, w które mogą przechodzić na kolejne strony) zaleca się stosowanie biblioteki \texttt{longtable}. Standardowo nie ma potrzeby rozciągania tabeli, jeśli ta nie zajmuje pełnej szerokości strony. Jeżeli jednak pożądany jest taki efekt, zaleca się stosowanie biblioteki \texttt{tabularx}, przy czym w takim rozwiązaniu stosowanie biblioteki \texttt{siunitx} jest utrudnione, lecz nadal możliwe.

Wybór środowiska stosowanego do wstawiania tabel jest zwykle narzucany przez wydawnictwo i opisane w dostarczonym szablonie. Dodatkowe informacje na temat wstawiania i formatowania tabel znaleźć można w \href{https://www.overleaf.com/learn/latex/Tables}{dokumentacji} projektu \texttt{Overleaf}. Tabele można również wstawiać automatycznie, wczytując ich zawartość z pliku tekstowego, co pokazano w dalszej części pracy.

\section{Wstawianie kodu źródłowego}

Fragmenty kodu źródłowego mogą być wstawiane w tekście stosując bibliotekę \texttt{minted}. Formatowanie kodu oraz kolorowanie składni odbywa się automatycznie. Istnieje również opcja wklejania fragmentu kodu z pliku źródłowego, stosując polecenie \mintinline{latex}{\inputminted[firstline = X, lastline = Y]{język}{plik}}. Listingi przywoływać można w tekście identycznie jak tabele i rysunki, stosując zapis \mintinline{latex}{\ref{nazwa_listingu}}. Kod źródłowy przykładowego listingu przedstawiono w listingu~\ref{lst:listing_sample}. Zastosowana opcja \texttt{linenos} aktywuje numerowanie linii.

\begin{listing}[htb]
\inputminted{latex}{skrypty/listing_sample.tex}
\makecaption{lst:listing_sample}{Kod źródłowy umożliwiający osadzenie listingu}
\end{listing}

\section{Zarządzanie bibliografią}

Stosując system składu \LaTeX{} najczęściej stosuje się bibliografię wczytywaną z zewnętrznego pliku, dla której spis bibliograficzny generowany jest automatycznie. Pozycje literatury cytowane są w tekście stosując polecenie \mintinline{latex}{\cite{nazwa_pozycji}}, co zamienia się w tekście na odnośnik do zadanej pozycji literatury. Przywoływać można również wiele pozycji jednocześnie, stosując w tym celu zapis \mintinline{latex}{\cite{nazwa1, nazwa2}}. Zacytowane w ten sposób pozycje zostaną posortowane automatycznie i zgrupowane, jeśli wymaga tego styl skonfigurowany w ramach stosowanego szablonu. Spis bibliograficzny generowany jest automatycznie i zawiera tylko te pozycje, które przynajmniej raz zostały przywołane w tekście. Oznacza to, że można stosować ten sam obszerny spis w wielu publikacjach. Spis posortowany jest zgodnie z ustawieniami biblioteki \texttt{biblatex}, które zawarte są w dostarczanym przez wydawnictwo szablonie.

Plik źródłowy z literaturą, którego przykład przedstawiono w listingu~\ref{lst:biblatex_sample}, należy przygotować w formacie \texttt{BibTeX}. Plik ten jest zwykłym plikiem tekstowym i zawiera informacje o kolejnych pozycjach literatury. Niemal każde pismo oferuje na swojej stronie przycisk \enquote{cytuj}, który umożliwia wygenerowanie wpisu bibliograficznego dla omawianego pliku. Wpis taki wygenerować można również w portalu \enquote{Google Scholar} klikając \enquote{cytuj}, a następnie wybierając opcję \texttt{BibTeX}. Dane zawarte w pliku zawierają informacje o publikacji, które są następnie wykorzystywane podczas generowania spisu.

\begin{listing}[hbt]
\inputminted{bibtex}{skrypty/biblatex_sample.bib}
\makecaption{lst:biblatex_sample}{Przykładowa treść pliku z literaturą}
\end{listing}

Zależnie od stosowanego w szablonie rozwiązania, spis literatury generuje się poleceniem \mintinline{latex}{\printbibliography}, podając przed rozpoczęciem dokumentu ścieżkę do spisu za pomocą polecenia \mintinline{latex}{\bibliography{nazwa_pliku}}, lub wstawiając w miejscu gdzie ma pojawić się spis polecenie \mintinline{latex}{\bibliography{nazwa_pliku}}. Szczegółowe informacje na temat rodzaju wpisów stosowanych w pliku bibliografii oraz roli pól opisujących te wpisy znaleźć można w \href{https://www.overleaf.com/learn/latex/Bibliography_management_in_LaTeX}{instrukcji}. Należy zauważyć, że do obsługi bibliografii stosowane mogą być różne biblioteki. Nie jest to jednak istotne z punktu widzenia użytkownika, ponieważ plik ze spisem literatury jest uniwersalny.

Jeżeli wymagane jest umieszczenie fragmentu tekstu w cudzysłowie, stosować należy bibliotekę \texttt{csquotes} oraz \mintinline{latex}{\enquote{cytowany tekst}}, co zamieni się na \enquote{cytowany tekst}. Nie należy samodzielnie wstawiać symbolów cudzysłowów. W przypadku wprowadzania cytatu w postaci nowego bloku tekstu należy zastosować środowisko \texttt{quoting} z biblioteki \texttt{quoting}. Dla przedstawionych w listingu~\ref{lst:biblatex_sample} pozycji cytowania wyglądają następująco~\cite{ldrjro_dwtownerr, mallat_wavelet}.

Podczas cytowania literatury oraz odnoszenia się do rysunków, tabel i równań sugeruje się stosować nierozdzielające spacje. W tym celu należy stosować \enquote{tyldę} zamiast spacji, czyli zamiast \mintinline{latex}{równanie \eqref{numer}} należy użyć \mintinline{latex}{równanie~\eqref{numer}}. Praktyka ta dotyczy zatem przypadków: \mintinline{latex}{\eqref{...}}, \mintinline{latex}{\ref{...}} oraz \mintinline{latex}{\cite{...}}. Rozwiązanie to zapewnia, że odnośnik nie zostanie przeniesiony do nowej linii tekstu.

\section{Dodatkowe możliwości}

Na podstawie niniejszej pracy zauważyć można, jaka jakość składu osiągana jest stosując \LaTeX{}. Podczas kompilacji program ma możliwość analizy tekstu i wstawianych obiektów, na podstawie której korygować może między innymi odstępy pomiędzy obiektami, miejsce ich wstawiania oraz dzielenie wyrazów. Przykładowo ustawiając za pomocą polecenia\mintinline{latex}{\setlength{\parskip}{12pt plus 5pt minus 2pt}} zadany odstęp pomiędzy akapitami ustalone zostaje działanie: ustaw zadany odstęp na \qty{12}{pt} przy czym dopuszczaj zwiększenie go maksymalnie o \qty{5}{pt} lub zmniejszenie o maksymalnie \qty{2}{pt} w celu osiągnięcia najlepszej jakości składu. Korekta odstępów umożliwia między innymi zapewnienie jednolitego poziomu tekstu na ostatniej linii strony.

Jakość składu obliczana jest na podstawie parametru \mintinline{latex}{\badness}, gdzie dąży się do minimalizacji wartości tego parametru. Każde niepożądane działanie (przykładowo pozostawienie pustej przestrzeni na stronie) skutkuje zwiększeniem wartości tego parametru. Wartość \mintinline{latex}{\badness} można również ręcznie przypisać do określonych działań, przykładowo do decyzji o dzieleniu wyrazu lub pozostawieniu sieroty, wdowy, bękarta lub szewca. Naturalnie, istnieją sytuacje w których to edytor musi samodzielnie skorygować skład, na przykład w przypadku wstawiania dużej liczby rysunków lub tabel, których rozmiar jest istotnie duży. Bardzo często jednak to wydawnictwo wykonuje ostateczną korektę składu, którą autor tekstu zatwierdza na samym końcu procesu publikacyjnego.

Ciekawe opcje oferuje również biblioteka \texttt{babel}. Standardowo używana jest ona aby zapewnić właściwą lokalizację dokumentu. W ten sposób dla domyślnych i gotowych szablonów istnieje możliwość automatycznego przetłumaczenia między innymi etykiet podpisów pod obiektami oraz nagłówków standardowych rozdziałów, jak spis treści czy bibliografia. Dodatkową funkcją biblioteki, dostępną podczas stosowania kompilatora \texttt{LuaTeX} jest opcja \verb|transforms = oneletter.nobreak|, która dla języka polskiego zapewnia przeniesienie wszystkich pojedynczych liter występujących w zdaniu do nowej linii, jeśli te miałyby pozostać samotnie na jej końcu. Funkcja ta jest niedostępna w żadnym typowym edytorze tekstu.

Wybór kompilatora narzucany jest przez twórcę szablonu, przy czym standardowo stosowany jest przestarzały, lecz stabilny, szybki i pewny kompilator \texttt{pdfLaTeX}. Po dodaniu na początku dokumentu linijki \mintinline{latex}{\usepackage[utf8]{inputenc}} kompilator ten wspiera kodowanie \texttt{UTF-8}, a zatem wprowadzanie polskich znaków jest możliwe bezpośrednio i bez komplikacji. Alternatywą dla omawianego kompilatora jest kompilator \texttt{XeLaTeX}, którego główną zaletą jest lepsza obsługa czcionek oraz natywna obsługa kodowania \texttt{UTF-8}. Najbardziej zaawansowanym kompilatorem jest natomiast kompilator \texttt{LuaTeX}, który umożliwia analizę i manipulację przetwarzanym tekstem dokumentu za pomocą języka programowania \texttt{Lua}.

\section{Uwagi końcowe}

System składu \LaTeX{} cechuje się pozornie dużym progiem wejścia. Skomplikowana konfiguracja, trudności w osiąganiu prostych celów, konsolowy charakter dostępnych narzędzi oraz mnogość bibliotek mogą skutecznie odstraszyć potencjalnego użytkownika. Dostępność \href{https://www.overleaf.com}{interfejsu} oferowanego przez projekt \texttt{Overleaf} oraz bogactwo oferowanych przez niego \href{https://www.overleaf.com/latex/examples}{przykładów} powoduje jednak, że próg ten zdecydowanie maleje.

Należy również zwrócić uwagę na fakt, że korzystając z gotowego szablonu użytkownik w zasadzie nie wprowadza żadnych skomplikowanych poleceń. Stosując odpowiedni edytor treść dokumentu wprowadzana jest naturalnie, istnieje graficzny edytor równań, podpowiadana jest treść i składnia poleceń, a ewentualne błędy są oznaczane w pliku źródłowym i wyjaśniane. Co więcej, nie ma możliwości uzyskania niewłaściwego formatu dokumentu, ponieważ wszystkie jego elementy są formatowane automatycznie, zgodnie z szablonem. Zmiana szablonu nie implikuje żadnej dodatkowej pracy. Łatwość zarządzania bibliografią, możliwość wykorzystywania tych samych wzorów, tabel i obrazów w różnych dokumentach, automatyczne numerowanie obiektów i prostota cytowania sprawiają, że już po sporządzeniu pierwszego manuskryptu powrót do stosowania klasycznego edytora staje się koszmarem. Nawiązując po raz kolejny do przykładu z początku dokumentu, jest to jak rezygnacja z posiadania w domu toalety.

Poniżej wymieniono istotne biblioteki, które stosować można niezależnie od szablonu dostarczanego przez wydawnictwo:
\begin{itemize}
\item \texttt{\href{https://ctan.org/pkg/biblatex}{biblatex}} do obsługi bibliografii i cytowań,
\item \texttt{\href{https://ctan.org/pkg/siunitx}{siunitx}} do formatowania liczb i wielkości fizycznych,
\item \texttt{\href{https://ctan.org/pkg/interval}{interval}} do obsługi przedziałów liczbowych,
\item \texttt{\href{https://ctan.org/pkg/babel-polish}{babel}} do obsługi wybranego języka w dokumencie,
\item \texttt{\href{https://ctan.org/pkg/pdfx}{pdfx}} aby zapewnić plik wyjściowy w formacie \texttt{PDF/A-3u},
\item \texttt{\href{https://ctan.org/pkg/hyperref}{hyperref}} do generowania łącz i odnośników w dokumencie,
\item \texttt{\href{https://ctan.org/pkg/pgfplots}{pgfplots}} do generowania wykresów bezpośrednio w dokumencie,
\item \texttt{\href{https://ctan.org/pkg/pgfplots}{pgfplotstable}} do wczytywania tabel z pliku tekstowego,
\item \texttt{\href{https://ctan.org/pkg/csvsimple}{csvsimple}} jako łatwiejszą w obsłudze alternatywę \texttt{pgfplotstable},
\item \texttt{\href{https://ctan.org/pkg/booktabs}{booktabs}} do jednolitego formatowania obramowania tabel,
\item \texttt{\href{https://ctan.org/pkg/fancyhdr}{fancyhdr}} do formatowania nagłówka i stopki strony,
\item \texttt{\href{https://ctan.org/pkg/csquotes}{csquotes}} do wstawiania cytatów w odpowiednim formacie,
\item \texttt{\href{https://ctan.org/pkg/caption}{caption}} do formatowania treści podpisów wstawianych obiektów,
\item \texttt{\href{https://ctan.org/pkg/floatrow}{floatrow}} do formatowania pozycji podpisów oraz wstawianych obiektów,
\item \texttt{\href{https://ctan.org/pkg/titlesec}{titlesec}} do formatowania tytułów rozdziałów oraz podrozdziałów,
\item \texttt{\href{https://ctan.org/pkg/minted}{minted}} do wstawiania i automatycznego formatowania kodu źródłowego,
\item \texttt{\href{https://ctan.org/pkg/xfp}{xfp}} dla możliwości wykonywania obliczeń podczas kompilacji.
\end{itemize}

Wszystkie biblioteki dostępne są na \href{https://ctan.org/}{stronie internetowej} projektu \texttt{CTAN}, przy czym stanowią one kolejne składniki pakietu \texttt{TeX Live} i są dostępne również w projekcie \texttt{Overleaf}. należy zaznaczyć, że funkcjonalność bibliotek może być uwarunkowana stosowanym kompilatorem oraz wersją pakietu \texttt{TeX Live}. Wiele z wymienionych pakietów jest często ładowanych domyślnie przez stosowany szablon. Wszystkie pakiety dostępne w repozytorium posiadają odpowiednią dokumentację i przykłady użycia. Bardzo wiele z nich jest dodatkowo opisanych w samouczkach oraz dokumentacji projektu \texttt{Overleaf}. Wiele bibliotek zapewnia bardzo podobną funkcjonalność, dzięki czemu użytkownik może zdecydować się na wybór przystępnego dla siebie rozwiązania.
